<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en" dir="ltr">

<!-- Mirrored from qedcode.com/blogs/michael-l-perry?page=5 by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 13 Jan 2017 12:22:18 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>Michael L Perry's blog | Q.E.D. Code</title>
  <meta http-equiv="Content-Style-Type" content="text/css" />
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="alternate" type="application/rss+xml" title="RSS - Michael L Perry&#039;s blog" href="michael-l-perry/feed" />
<link rel="shortcut icon" href="http://qedcode.com/misc/favicon.ico" type="image/x-icon" />
  <link type="text/css" rel="stylesheet" media="all" href="http://qedcode.com/modules/book/book.css?2" />
<link type="text/css" rel="stylesheet" media="all" href="http://qedcode.com/modules/node/node.css?2" />
<link type="text/css" rel="stylesheet" media="all" href="http://qedcode.com/modules/system/defaults.css?2" />
<link type="text/css" rel="stylesheet" media="all" href="http://qedcode.com/modules/system/system.css?2" />
<link type="text/css" rel="stylesheet" media="all" href="http://qedcode.com/modules/system/system-menus.css?2" />
<link type="text/css" rel="stylesheet" media="all" href="http://qedcode.com/modules/user/user.css?2" />
<link type="text/css" rel="stylesheet" media="all" href="http://qedcode.com/sites/all/modules/mollom/mollom.css?2" />
<link type="text/css" rel="stylesheet" media="all" href="http://qedcode.com/sites/all/modules/views/css/views.css?2" />
<link type="text/css" rel="stylesheet" media="all" href="http://qedcode.com/themes/theme073/style.css?2" />
  <script type="text/javascript" src="http://qedcode.com/misc/jquery.js?2"></script>
<script type="text/javascript" src="http://qedcode.com/misc/drupal.js?2"></script>
<script type="text/javascript" src="http://qedcode.com/sites/all/modules/google_analytics/googleanalytics.js?2"></script>
<script type="text/javascript" src="http://qedcode.com/sites/all/modules/mollom/mollom.js?2"></script>
<script type="text/javascript">
<!--//--><![CDATA[//><!--
jQuery.extend(Drupal.settings, { "basePath": "/", "googleanalytics": { "trackOutbound": 1, "trackMailto": 1, "trackDownload": 1, "trackDownloadExtensions": "7z|aac|arc|arj|asf|asx|avi|bin|csv|doc|exe|flv|gif|gz|gzip|hqx|jar|jpe?g|js|mp(2|3|4|e?g)|mov(ie)?|msi|msp|pdf|phps|png|ppt|qtm?|ra(m|r)?|sea|sit|tar|tgz|torrent|txt|wav|wma|wmv|wpd|xls|xml|z|zip" } });
//--><!]]>
</script>
  
</head>
  
<body>
    <table id="main">
        <tr>
            <td width="100%" class="header">
            	<div class="top-left">
                	<div class="top-right">
                    	<table width="100%">
                            <tr>
                                <td width="100%" style="height:195px;">
                                    <table width="100%">
                                        <tr>
                                            <td width="">
                                                                                                    <a href="../index.html" title="Home"><img src="http://qedcode.com/themes/theme073/images/logo.png" alt="Home" border="0" class="logo" /></a><br />
                                                                                                                                                
                                                                                            </td>
                                            <td width="270">
                                                <div class="search-box">
                                                                                                    </div>
                                            </td>
                                        </tr>
                                    </table>
                                </td>
                            </tr>
                            <tr>
                                <td width="100%" style="height:54px;">
                                                                            <div class="pr-menu">
                                            <ul class="links primary-links"><li class="menu-227 first"><a href="../node.html" title="">Latest Article</a></li>
<li class="menu-339"><a href="../podcast.html" title="Q.E.D. Code Podcast">Podcast</a></li>
<li class="menu-219"><a href="../theory.html" title="">Theory</a></li>
<li class="menu-220"><a href="../practice.html" title="">Practice</a></li>
<li class="menu-221 last"><a href="../speaking.html" title="">Speaking</a></li>
</ul>                                            <br class="clear" />
                                        </div>
                                                                    </td>
                            </tr>
                        </table>
                    </div>
                </div>
            </td>
        </tr>
        <tr>
            <td width="100%">
                <table width="100%" >
                    <tr>
                        <td width="189">
                            <div class="left2">
                                                                    <table width="100%">
                                      <tr>
                                        <td width="100%">
                                            <div class="block block-block" id="block-block-2">
	<div class="block-bot">
    	<div class="block-top">
        	<div class="block-indent">
                <div class="title">
                    <h3>About me</h3>
                </div>
                <div class="content"><div style="margin: 15px;">
<p style="margin-bottom: 7px;">Michael L Perry</p>
<p><a href="http://improvingenterprises.com/"><img src="../images/IE-Logo.png" width="145" alt="Improving Enterprises" /></a></p>
<p style="margin-bottom: 15px;">Principal Consultant</p>
<p><a href="http://twitter.com/michaellperry">@michaellperry</a></p>
</div>
</div>
            </div>
        </div>
    </div>
</div><div class="block block-user" id="block-user-0">
	<div class="block-bot">
    	<div class="block-top">
        	<div class="block-indent">
                <div class="title">
                    <h3>User login</h3>
                </div>
                <div class="content"><form action="http://qedcode.com/blogs/michael-l-perry?destination=blog%2F1%3Fpage%3D5"  accept-charset="UTF-8" method="post" id="user-login-form">
<div><div class="form-item" id="edit-name-wrapper">
 <label for="edit-name">Username: <span class="form-required" title="This field is required.">*</span></label>
 <input type="text" maxlength="60" name="name" id="edit-name" size="15" value="" class="form-text required" />
</div>
<div class="form-item" id="edit-pass-wrapper">
 <label for="edit-pass">Password: <span class="form-required" title="This field is required.">*</span></label>
 <input type="password" name="pass" id="edit-pass"  maxlength="60"  size="15"  class="form-text required" />
</div>
<input type="submit" name="op" id="edit-submit" value="Log in"  class="form-submit" />
<div class="item-list"><ul><li class="first last"><a href="../user/password.html" title="Request new password via e-mail.">Request new password</a></li>
</ul></div><input type="hidden" name="form_build_id" id="form-d213e57667f75e79c76cf756eaa1c023" value="form-d213e57667f75e79c76cf756eaa1c023"  />
<input type="hidden" name="form_id" id="edit-user-login-block" value="user_login_block"  />

</div></form>
</div>
            </div>
        </div>
    </div>
</div>                                        </td>
                                      </tr>
                                    </table>
                                                            </div>
                        </td>
                        <td width="0">
                            <div class="right2">
                                                            </div>
                        </td>
                        <td width="" class="cont-row">
                            <div class="border-left">
                                <div class="border-right">
                                    <div class="border-bot">
                                        <div class="border-top">
                                            <div class="corner-bot-left">
                                                <div class="corner-bot-right">
                                                    <div class="corner-top-left">
                                                        <div class="corner-top-right">
                                                            <div class="cent">
                                                                                                                                                                                                
                                                                                                                        
                                                                <h2>Michael L Perry's blog</h2>
                                                                                                                                                                                                                                                                 
                                                                                                                    
                                                                                                                    
                                                              <!-- start main content -->
                                                            <div class="item-list"></div><div class="node">
	    	
			            <div class="bg-h2">
                <h1 class="title"><a href="../cap.html">The CAP Theorem and its Consequences</a></h1>
                <div class="submit"><span class="submitted">Submitted by Michael L Perry on Wed, 08/17/2011 - 17:13</span></div>
            </div>
       
        <div class="taxonomy"></div>
  
    <div class="content"><p>Here you will find the slides and code from my talk “The CAP Theorem and its Consequences”. The slides are in Silverlight, so use these controls to navigate:</p>
<ul>
<li>Page down/up to go forward and back by slide.</li>
<li>Arrow down/up to go forward and back within a slide (Definitions, Proof, Choices, and Event Sourcing).</li>
<li>Scroll wheel to zoom in.</li>
<li>Drag to pan.</li>
</ul>
<p>You can also <a href="http://qedcode.com/sites/default/files/The-CAP-Theorem_EF09/CAPTheorem_MichaelLPerry.zip">download the source code</a> and run the examples yourself. Run databases.sql to create the three databases. Populate the databases with test data in accounts “12345”, “23456”, and “34567”. The application transfers money among these accounts.</p>
<p><object data="data:application/x-silverlight-2," type="application/x-silverlight-2" width="800" height="600" autoupdate="true"> <param name="source" value="http://qedcode.com/sites/default/files/The-CAP-Theorem_EF09/CAP.xap" /> <param name="minRuntimeVersion" value="3.0.40624.0" /> <param name="background" value="White" /> <param name="autoUpgrade" value="true" /> <a href="http://go.microsoft.com/fwlink/?LinkID=149156&amp;v=3.0.40624.0" style="text-decoration:none">          			  <img src="http://go.microsoft.com/fwlink/?LinkId=161376" alt="Get Microsoft Silverlight" style="border-style:none" /> </a> </object></p>
<p>For more information, please read the <a href="../content/cap-theorem.html">summary article</a>.</p>
</div>
    <br />
        	<div class="links-align">
            <div class="bg-links">
                <div class="links-left">
                    <div class="links-right">
                        <div class="links"><ul class="links inline"><li class="comment_add first last"><a href="http://qedcode.com/comment/reply/53#comment-form" title="Add a new comment to this page.">Add new comment</a></li>
</ul></div>
                    </div>
                </div>
            </div>
        </div>
	    <br class="clear" />    
    </div><div class="node">
	    	
			            <div class="bg-h2">
                <h1 class="title"><a href="../content/dallas-techfest-2011.html">Dallas TechFest 2011</a></h1>
                <div class="submit"><span class="submitted">Submitted by Michael L Perry on Mon, 08/15/2011 - 11:52</span></div>
            </div>
       
        <div class="taxonomy"></div>
  
    <div class="content"><p>I presented two sessions at Dallas TechFest this year. I also attended some excellent sessions, hung out with old friends, and made some new contacts. Thanks to Tim Rayburn, Teresa Burger, Shane Holder, and other organizers, this was a fantastic event. They’ve really set the bar high for next year.</p>
<h3>My sessions</h3>
<p>My first session, <a href="../practice/provable-apis.html">Provable APIs</a>, was very well attended. This talk presents techniques that you can use to ensure that people consuming your API do so correctly. These techniques take advantage of the compiler, and the type system in particular. I present samples in C#, but the techniques work well in any statically typed language.</p>
<p>The session was very well attended. We had people using not only .NET, but also Java, and C++. We even had some dynamically-typed languages represented including JavaScript and Ruby. Although they don’t have a compiler and static type system to leverage, they can still use some of these techniques.</p>
<p>The audience was extremely interactive. They posed some excellent questions. They were particularly interested to see a refactoring of the .NET Socket class, with its notoriously error-prone API.</p>
<p>My second session, <a href="http://correspondencecloud.com/?q=correspondence">Correspondence: Occasionally-Connected Windows Phone Apps</a>, was not as well attended. Those that did participate were rather quiet during the theory portion, but started to interact during the demo. Based on their feedback, I will move the demo to the beginning of the talk, and save the theory only for after I get questions about how it works.</p>
<h3>The app</h3>
<p>The demo for the Correspondence session was actually the Dallas TechFest 2011 Windows Phone 7 app. I got some great feedback from people who were using the app during the conference. I also saw a few bugs that others reported and that I experienced myself. I’ll be rolling out bug fixes for upcoming conferences.</p>
<p>All told, I had 22 downloads of the app. Out of those, I received 2 ratings with feedback, for an average of 4.5 stars. 22 downloads out of a possible set of about 200 attendees, only about 30% of which carry Windows Phones, is pretty decent reach. And to get 10% of the downloads giving feedback is excellent. Sure, the absolute numbers are too low to make any generalizations, but I’ll take what I can get.</p>
<p>The DevLink 2011 app is in the Marketplace now. If you are attending DevLink and you carry a Windows Phone 7, please give it a try.</p>
<h3>Old friends and new contacts</h3>
<p>Tim, Teresa, and Shane are all old friends, so to see them pull off such an outstanding conference was a real treat. As an added bonus, I got to see a good friend from work present in his first conference. <a href="http://giri.sh/2011/08/13/my-talk-on-jquery-at-dallas-techfest-2011/">Girish Gangadharan</a> presented on JQuery, and packed the room. Actually, I didn’t see him present because my Correspondence session was at the same time. But I saw pictures, so I know it was a full house.</p>
<p>I also got to meet some new folks. <a href="http://devlinliles.com/">Devlin Liles</a> from Improving Enterprises and <a href="http://jaysmith.us/">Jay Smith</a> from Tyson Foods are active members of the open source community. Their tools help out user groups and event organizers across the country and the technology spectrum. I look forward to working with them on community-centered open source projects.</p>
<p>I had a great time at Dallas TechFest this year. I’m looking forward to following up on all the contacts I’ve made, to applying all the techniques that I’ve learned, and most importantly to participating next year.</p>
<p>Now on to DevLink.</p>
</div>
    <br />
        	<div class="links-align">
            <div class="bg-links">
                <div class="links-left">
                    <div class="links-right">
                        <div class="links"><ul class="links inline"><li class="comment_add first last"><a href="http://qedcode.com/comment/reply/51#comment-form" title="Add a new comment to this page.">Add new comment</a></li>
</ul></div>
                    </div>
                </div>
            </div>
        </div>
	    <br class="clear" />    
    </div><div class="node">
	    	
			            <div class="bg-h2">
                <h1 class="title"><a href="http://correspondencecloud.com/?q=correspondence">Correspondence</a></h1>
                <div class="submit"><span class="submitted">Submitted by Michael L Perry on Tue, 08/09/2011 - 13:05</span></div>
            </div>
       
        <div class="taxonomy"></div>
  
    <div class="content"><p>Correspondence is a collaboration framework for occasionally-connected clients. Express your model once, and it gives you local storage, synchronization, and push notification across devices. We currently support Silverlight, Windows Phone, WPF, and MVC 3. Android is coming soon.</p>
<h3>Collaborative framework</h3>
<p><a href="http://qedcode.com/sites/default/files/Correspondence_1172C/Logo.png"><img style="background-image: none; border-right-width: 0px; padding-left: 0px; padding-right: 0px; display: inline; float: right; border-top-width: 0px; border-bottom-width: 0px; border-left-width: 0px; padding-top: 0px" title="Logo" border="0" alt="Logo" align="right" src="http://qedcode.com/sites/default/files/Correspondence_1172C/Logo_thumb.png" width="203" height="240" /></a>People don’t just own one computer anymore. Now they have a desktop, a laptop, and a phone. They want their data to seamlessly flow across all of their devices.</p>
<p>People take their devices with them. These devices aren’t always connected. And even when they are, people don’t want to wait for them to connect to a central server. Everyone should have their own data on their own device for immediate access.</p>
<p>People use software to collaborate with each other. Some domains are overtly collaborative, such as social networking and gaming. Others are more discreet, like customer relationship management and project planning. Actions performed by collaborators affect the user experience.</p>
<h3>Systems built with Correspondence</h3>
<p>We have built a number of systems using Correspondence.</p>
<ul>
<li><a href="http://honeydoli.st/">HoneyDo List</a>: Todo lists that you can share with your family.</li>
<li><a href="http://facetedworlds.com/commuter/">Commuter</a>: A continuous podcast playlist for iTunes on Windows. </li>
<li><a href="http://windowsphone.com/s?appid=2f5b4f2c-ff3a-e011-854c-00237de2db9e">Faceted Reversi</a>: Head-to-head reversi game for Windows Phone. </li>
<li>Dallas TechFest 2011: Personal conference schedule for Windows Phone. </li>
<li><a href="../thoughtcloud.html">Thought Cloud</a>: Collaborative mind mapper (demo). </li>
</ul>
<h3>Slides</h3>
<p>The <a href="../extras/correspondence_slides.html">slides for the presentation</a> are rendered in Silverlight. Once the page loads, click on it to give it focus. Then use Page Down to progress through the presentation. Hit F11 to enter full-screen mode. The <a href="https://github.com/michaellperry/FacetedWorlds.ThoughtCloud">sample code</a> used in this presentation is on GitHub.</p>
<h3>Videos</h3>
<ul>
<li><a href="http://vimeo.com/15291930">Correspondence on Windows Phone 7</a> (16:30) </li>
<li><a href="http://vimeo.com/22700086">Occasionally-connected applications in Silverlight with Correspondence</a> (56:41) </li>
<li><a href="http://vimeo.com/15300219">Coding Correspondence on WP7 and WPF</a> (45:40) </li>
</ul>
<h3>Get started</h3>
<p>These are the resources you will need to build an occasionally connected Windows Phone 7 or Silverlight application using Correspondence.</p>
<ol>
<li>Install the <strong>NuGet</strong> Package Manager through the Visual Studio 2010 Extension Manager. Detailed instructions on the <a href="http://nuget.codeplex.com/wikipage?title=Getting%20Started">NuGet project site</a>. </li>
<li>Add the <strong>Correspondence.WindowsPhone.AllInOne</strong> or <strong>Correspondence.Silverlight.AllInOne</strong> package to a Windows Phone 7 or Silverlight 4 application. </li>
<li>Follow the <strong>walkthrough</strong> on the <a href="http://correspondence.codeplex.com/">Correspondence project site</a> to learn how to build a Correspondence model. </li>
<li><a href="http://correspondencecloud.azurewebsites.net/SignUp?q=contact">Sign up</a> for a synchronization server <strong>API Key</strong>. Put the API key in your POXConfigurationProvider. </li>
</ol>
</div>
    <br />
        	<div class="links-align">
            <div class="bg-links">
                <div class="links-left">
                    <div class="links-right">
                        <div class="links"><ul class="links inline"><li class="comment_add first last"><a href="http://qedcode.com/comment/reply/49#comment-form" title="Add a new comment to this page.">Add new comment</a></li>
</ul></div>
                    </div>
                </div>
            </div>
        </div>
	    <br class="clear" />    
    </div><div class="node">
	    	
			            <div class="bg-h2">
                <h1 class="title"><a href="../content/speaking-dallas-techfest.html">Speaking at Dallas TechFest</a></h1>
                <div class="submit"><span class="submitted">Submitted by Michael L Perry on Wed, 08/03/2011 - 22:22</span></div>
            </div>
       
        <div class="taxonomy"></div>
  
    <div class="content"><p>I’ll be presenting next week at <a href="http://dallastechfest.com/Speakers/73/michael-l-perry">Dallas TechFest</a>. I’m doing two sessions: Provable APIs and Correspondence for Windows Phone 7.</p>
<p>Provable APIs is a session that I originally created for the Q.E.D. lunches at work. It shows how you can use regular features of your compiler – not even the new contract validation stuff – to verify that people are using your classes correctly. If you create your APIs provably, then your users will find it a pleasure to work with your code.</p>
<p>Correspondence is a library for building occasionally connected clients. I used it to build the Dallas TechFest conference scheduling app for Windows Phone 7. In this session, I take apart the conference app and show you how you can build your own great user experiences.</p>
<p>As an added bonus, I will reveal the Correspondence logo at the conference. Come out and see it before I post it on the project site.</p>
</div>
    <br />
        	<div class="links-align">
            <div class="bg-links">
                <div class="links-left">
                    <div class="links-right">
                        <div class="links"><ul class="links inline"><li class="comment_add first last"><a href="http://qedcode.com/comment/reply/48#comment-form" title="Add a new comment to this page.">Add new comment</a></li>
</ul></div>
                    </div>
                </div>
            </div>
        </div>
	    <br class="clear" />    
    </div><div class="node">
	    	
			            <div class="bg-h2">
                <h1 class="title"><a href="../content/microsoft-mvp-client-application-development.html">Microsoft MVP in Client Application Development</a></h1>
                <div class="submit"><span class="submitted">Submitted by Michael L Perry on Mon, 08/01/2011 - 10:34</span></div>
            </div>
       
        <div class="taxonomy"></div>
  
    <div class="content"><p><a href="http://qedcode.com/sites/default/files/MicrosoftMVPinClientApplicationDevelopme_94BA/MVPLogo.gif"><img style="border-bottom: 0px; border-left: 0px; display: block; float: none; margin-left: auto; border-top: 0px; margin-right: auto; border-right: 0px" title="MVPLogo" border="0" alt="MVPLogo" src="http://qedcode.com/sites/default/files/MicrosoftMVPinClientApplicationDevelopme_94BA/MVPLogo_thumb.gif" width="115" height="180" /></a> </p>
<p>I have received the Microsoft MVP award in Client Application Development. While this award is intended to recognize community leadership, I feel that it is only possible because of the support I get <em>from</em> the community. Thank you for attending my talks, asking great questions, and encouraging me to learn and to teach. This recognition will open even more doors for us to converse. And for that I am grateful.</p>
<p>Special thanks go out to <a href="http://chriskoenig.net/">Chris Koenig</a>, who gave me little pushes, key opportunities, and finally the nomination that lead to this award.</p>
</div>
    <br />
        	<div class="links-align">
            <div class="bg-links">
                <div class="links-left">
                    <div class="links-right">
                        <div class="links"><ul class="links inline"><li class="comment_add first last"><a href="http://qedcode.com/comment/reply/47#comment-form" title="Add a new comment to this page.">Add new comment</a></li>
</ul></div>
                    </div>
                </div>
            </div>
        </div>
	    <br class="clear" />    
    </div><div class="node">
	    	
			            <div class="bg-h2">
                <h1 class="title"><a href="../thoughtcloud.html">Thought Cloud</a></h1>
                <div class="submit"><span class="submitted">Submitted by Michael L Perry on Thu, 06/02/2011 - 09:11</span></div>
            </div>
       
        <div class="taxonomy"></div>
  
    <div class="content"><p>Capture thoughts and share them with others.</p>
<script type="text/javascript">
        function onSilverlightError(sender, args) {
            var appSource = "";
            if (sender != null && sender != 0) {
              appSource = sender.getHost().Source;
            }
            
            var errorType = args.ErrorType;
            var iErrorCode = args.ErrorCode;

            if (errorType == "ImageError" || errorType == "MediaError") {
              return;
            }

            var errMsg = "Unhandled Error in Silverlight Application " +  appSource + "\n" ;

            errMsg += "Code: "+ iErrorCode + "    \n";
            errMsg += "Category: " + errorType + "       \n";
            errMsg += "Message: " + args.ErrorMessage + "     \n";

            if (errorType == "ParserError") {
                errMsg += "File: " + args.xamlFile + "     \n";
                errMsg += "Line: " + args.lineNumber + "     \n";
                errMsg += "Position: " + args.charPosition + "     \n";
            }
            else if (errorType == "RuntimeError") {           
                if (args.lineNumber != 0) {
                    errMsg += "Line: " + args.lineNumber + "     \n";
                    errMsg += "Position: " +  args.charPosition + "     \n";
                }
                errMsg += "MethodName: " + args.methodName + "     \n";
            }

            throw new Error(errMsg);
        }
    </script><object data="data:application/x-silverlight-2," type="application/x-silverlight-2" width="700" height="500" autoupdate="true">
  <param name="source" value="http://qedcode.com/sites/default/files/ThoughtCloud_97D3/FacetedWorlds.ThoughtCloud.xap" />
  <param name="onError" value="onSilverlightError" />
  <param name="minRuntimeVersion" value="4.0.50826.0" />
  <param name="background" value="White" />
  <param name="autoUpgrade" value="true" />
  <a href="http://go.microsoft.com/fwlink/?LinkID=149156&amp;v=4.0.50826.0" style="text-decoration:none">
    <img src="http://go.microsoft.com/fwlink/?LinkId=161376" alt="Get Microsoft Silverlight" style="border-style:none" />
  </a>
</object><p>Right-click and install on this computer for off-line use.</p>
</div>
    <br />
        	<div class="links-align">
            <div class="bg-links">
                <div class="links-left">
                    <div class="links-right">
                        <div class="links"><ul class="links inline"><li class="comment_add first last"><a href="http://qedcode.com/comment/reply/45#comment-form" title="Add a new comment to this page.">Add new comment</a></li>
</ul></div>
                    </div>
                </div>
            </div>
        </div>
	    <br class="clear" />    
    </div><div class="node">
	    	
			            <div class="bg-h2">
                <h1 class="title"><a href="../content/approaching-ideal-two-directions.html">Approaching an ideal from two directions</a></h1>
                <div class="submit"><span class="submitted">Submitted by Michael L Perry on Fri, 04/29/2011 - 15:47</span></div>
            </div>
       
        <div class="taxonomy"></div>
  
    <div class="content"><p>The ideal specification is unambiguous. After reading such a specification, the consumer should have no question as to the correct behavior of the system described.</p>
<p>The ideal code is not extraneous. There are no implementation details written in the code that were not part of the problem domain. Such details would not have been described in the specification, and could therefore not be verified as correct. If they can’t be verified as correct, then they must be arbitrary. If more than one arbitrary implementation choice could lead to a correct program, then why must the programmer make the decision? And why must he express that decision in code? The computer could figure it out.</p>
<p>As specifications approach their ideal lack of ambiguity, they remain firmly in the state of having no extraneous parts. The specification doesn’t contain implementation details. The customer doesn’t care how it is implemented. They just want it to be correct, and optimized for cost and speed.</p>
<p>As code approaches its ideal brevity, it remains firmly unambiguous. Since code is executed by a deterministic computer, the computer knows at any point what the program will do. There is no question.</p>
<p>Specification, in trying to become unambiguous, is approaching code. Code, in removing extraneous details, is trying to become specification.</p>
<h3>Example: a checkbook ledger</h3>
<p>If we were to write ideal specifications for a checkbook ledger, we would use only terms from the problem domain. We would define a transaction. We would say what a user could do with a transaction. And we would describe the reaction of the system to those operations. These statements would leave no doubt as to the correct behavior of the system. For example, we could write:</p>
<ul>
<li>A transaction is a named, dated event that either increases or decreases the balance of an account by some positive amount.</li>
<li>A user can create a transaction, giving the name, date, and amount of increase or decrease.</li>
<li>A user can change the name, date, or amount of a transaction.</li>
<li>A user can void a transaction.</li>
<li>The system displays transactions in chronological order.</li>
<li>The system displays the running account balance of each transaction, that being the previous transaction’s running account balance plus the current transaction’s increase or minus its decrease.</li>
<ul>
<li>The chronologically first transaction, having no previous transaction, assumes a prior balance of zero.</li>
<li>A voided transaction does not increase or decrease the prior balance.</li>
</ul>
</ul>
<p>If we were to write ideal code for a checkbook ledger, we would only solve the business problem. Storage, communications, and representation details would be handled by our chosen frameworks. We wouldn’t have to describe how a transaction is turned into bits on the network, nor would we have to generate SQL statements to persist or query them. For example, we might write this code:</p>
<pre class="code">Transaction(BelongingTo: Account) {
    Name: string
    Effective: date
    Change: [Increase, Decrease]
    Amount: decimal {Amount &gt; 0.0}
}

Void(Voided: Transaction) { }

Account {
    Transactions {
        Transaction t : t.BelongingTo = this
        where not exists Void v : v.Voided = t
        order by t.Effective
        select {
            t,
            RunningBalance = (prior.RunningBalance ?? 0.0) +
                (t.Change = Increase) ? t.Amount : -t.Amount
        }
    }
}</pre><p>The code verifiably satisfies the specifications, because it says no more and no less than the specifications do. In fact, besides the syntax, the code <em>is</em> the specification. The two artifacts, each evolving toward its own ideal, have ended up in the same place.</p>
<h3>Programming languages of the future</h3>
<p>No programming language yet developed is as concise as the above code. But we are getting closer. Modern frameworks raise the level of abstraction to remove implementation details from application code. Languages are moving away from the imperative style and adopting declarative and functional styles.</p>
<p>Today, programs are be specified by a Business Analyst, who is skilled in decomposing and unambiguously describing business processes. And programs are written by developers, who are skilled in constructing solutions from technical components at all levels of abstraction. But when programming languages finally do reach this level of brevity, a new discipline will emerge. Neither skill set will be sufficient to solve business problems with software. One person will create this artifact, an executable specification, using a mix of these two skill sets. This person will possess the mind of a mathematician.</p>
</div>
    <br />
        	<div class="links-align">
            <div class="bg-links">
                <div class="links-left">
                    <div class="links-right">
                        <div class="links"><ul class="links inline"><li class="comment_add first last"><a href="http://qedcode.com/comment/reply/42#comment-form" title="Add a new comment to this page.">Add new comment</a></li>
</ul></div>
                    </div>
                </div>
            </div>
        </div>
	    <br class="clear" />    
    </div><div class="node">
	    	
			            <div class="bg-h2">
                <h1 class="title"><a href="../content/line-business-applications-xaml.html">Line of business applications in XAML</a></h1>
                <div class="submit"><span class="submitted">Submitted by Michael L Perry on Thu, 12/09/2010 - 11:55</span></div>
            </div>
       
        <div class="taxonomy"></div>
  
    <div class="content"><p>I spoke at the <a href="http://dallasxaml.com/">Dallas XAML User Group</a> on Tuesday about building line-of-business applications in WPF and Silverlight. This was a hands-on event, so the participants followed along with their own laptops. Please download the source code and try it yourself.</p>
<div style="padding-bottom: 0px; margin: 0px; padding-left: 0px; padding-right: 0px; display: inline; float: none; padding-top: 0px" id="scid:8eb9d37f-1541-4f29-b6f4-1eea890d4876:82a11187-cc56-446e-8670-99281675cee0" class="wlWriterEditableSmartContent">
<div><a href="http://qedcode.com/sites/default/files/LineofbusinessapplicationsinXAML_986E/CatalogEditor.zip" target="_self">CatalogEditor.zip</a></div>

</div>
<p>The idea behind the talk was to exercise some of the most common features of XAML, Visual Studio, and Blend that are used in a line-of-business application. There are more features in XAML than one person can master. This is the subset that will give you the best return on your learning investment.</p>
<h3>Unit test your view models</h3>
<p>One of the benefits of separation patterns like MVVM is that you can unit test more of your code. Take advantage of it.</p>
<p>You can only unit test code that is in a class library. So it follows that view models should be in class libraries.</p>
<p>View models need to call services to access data and make changes. At run time, these can be WCF, RIA Services, OData feeds, or any other kind of service. But at unit test time, these have to be mocks. There are two reasons for mocking a service in a unit test:</p>
<ul>
<li>Unit tests should run in isolation; they should not pass or fail depending upon the environment. </li>
<li>You need to test that the service gets called appropriately. </li>
</ul>
<p>To mock a service at unit test time, we inject our dependencies. For example:</p>
<pre class="code"><span style="color: blue">public interface </span><span style="color: #2b91af">ICatalogService
</span>{
    <span style="color: #2b91af">List</span>&lt;<span style="color: #2b91af">Product</span>&gt; LoadProducts();
}</pre><pre class="code"><span style="color: blue">public class </span><span style="color: #2b91af">CatalogViewModel
</span>{
    <span style="color: blue">private </span><span style="color: #2b91af">ICatalogService </span>_catalogService;

    <span style="color: blue">public </span>CatalogViewModel(<span style="color: #2b91af">ICatalogService </span>catalogService)
    {
        _catalogService = catalogService;
    }
}</pre><p>By injecting the service into the constructor via an interface, we can provide a real implementation at run time, and a mock implementation at unit test time.</p>
<pre class="code"><span style="color: blue">public class </span><span style="color: #2b91af">MockCatalogService </span>: <span style="color: #2b91af">ICatalogService
</span>{
    <span style="color: blue">public </span><span style="color: #2b91af">List</span>&lt;<span style="color: #2b91af">Product</span>&gt; LoadProducts()
    {
        <span style="color: blue">return new </span><span style="color: #2b91af">List</span>&lt;<span style="color: #2b91af">Product</span>&gt;()
        {
            <span style="color: blue">new </span><span style="color: #2b91af">Product</span>() { Name = <span style="color: #a31515">&quot;Widget&quot; </span>},
            <span style="color: blue">new </span><span style="color: #2b91af">Product</span>() { Name = <span style="color: #a31515">&quot;Gadget&quot; </span>}
        };
    }
}</pre><pre class="code">[<span style="color: #2b91af">TestClass</span>]
<span style="color: blue">public class </span><span style="color: #2b91af">CatalogViewModelTest
</span>{
    <span style="color: blue">private </span><span style="color: #2b91af">CatalogViewModel </span>_catalogViewModel;

    [<span style="color: #2b91af">TestInitialize</span>]
    <span style="color: blue">public void </span>Initialize()
    {
        <span style="color: #2b91af">MockCatalogService </span>mockService = <span style="color: blue">new </span><span style="color: #2b91af">MockCatalogService</span>();
        _catalogViewModel = <span style="color: blue">new </span><span style="color: #2b91af">CatalogViewModel</span>(
            mockService);
        _catalogViewModel.Load();
    }

    [<span style="color: #2b91af">TestMethod</span>]
    <span style="color: blue">public void </span>CanGetProductListFromService()
    {
        <span style="color: blue">var </span>products = _catalogViewModel.Products;
        <span style="color: #2b91af">Assert</span>.AreEqual(2, products.Count());
    }
}</pre><h3></h3>
<h3>Put all views in UserControls</h3>
<p>Don’t use the MainWindow as a view. Don’t drop controls directly into it. Instead, create a new UserControl and build your view in there. Doing so will have several benefits:</p>
<ul>
<li>You can reuse and compose UserControls, but not Windows. </li>
<li>You can switch from one UserControl to another within a Window for simple navigation. </li>
<li>UserControls can be used within a DataTemplate to polymorphically select the view based on the view model. </li>
<li>The container can inject the DataContext into a UserControl, rather than relying upon the view model locator pattern. </li>
</ul>
<p>That last point requires further explanation. We’ve already uses dependency injection to get the service into the view model. We could have used a pattern called “service locator” instead to let the view model find the service itself. Service locator is well documented to have disadvantages when compared to dependency injection.</p>
<p>The view model locator pattern is just another service locator. As such, it suffers from many of the same drawbacks. For example, when the user navigates to a view, they have already selected a specific object. The view model locator must somehow locate that selected object. We end up with a Hail Mary pass, where the selection is stored in one view and retrieved in the locator for another view. If the object was instead injected into the view, it becomes much easier to manage.</p>
<p>To inject the first view model at run time, set the DataContext inside of the main window’s Loaded event.</p>
<pre class="code"><span style="color: blue">private void </span>Window_Loaded(<span style="color: blue">object </span>sender, <span style="color: #2b91af">RoutedEventArgs </span>e)
{
    <span style="color: #2b91af">CatalogViewModel </span>viewModel = <span style="color: blue">new </span><span style="color: #2b91af">CatalogViewModel</span>(
        <span style="color: blue">new </span><span style="color: #2b91af">RealCatalogService</span>());
    viewModel.Load();
    <span style="color: blue">this</span>.DataContext = viewModel;
}</pre><p>From that point forward, you can use properties of the main view model to declaratively inject child view models. DataTemplates come in handy for this.</p>
<h3>Design time data</h3>
<p>There are two ways to use design-time data in Blend with the MVVM pattern. The easy way is to create sample data from a class.</p>
<p><a href="http://qedcode.com/sites/default/files/LineofbusinessapplicationsinXAML_986E/image.png"><img style="border-right-width: 0px; display: inline; border-top-width: 0px; border-bottom-width: 0px; border-left-width: 0px" title="image" border="0" alt="image" src="http://qedcode.com/sites/default/files/LineofbusinessapplicationsinXAML_986E/image_thumb.png" width="222" height="76" /></a> </p>
<p>Select the view model class. Then layout your controls and drag properties onto them to databind.</p>
<p>The second way is to create an object data source.</p>
<p><a href="http://qedcode.com/sites/default/files/LineofbusinessapplicationsinXAML_986E/image_3.png"><img style="border-right-width: 0px; display: inline; border-top-width: 0px; border-bottom-width: 0px; border-left-width: 0px" title="image" border="0" alt="image" src="http://qedcode.com/sites/default/files/LineofbusinessapplicationsinXAML_986E/image_thumb_3.png" width="204" height="138" /></a> </p>
<p>First create a class with one property: the view model. Initialize this view model with a mock service. This mock data will appear at design time.</p>
<pre class="code"><span style="color: blue">public class </span><span style="color: #2b91af">CatalogDesignerData
</span>{
    <span style="color: blue">public </span><span style="color: #2b91af">CatalogViewModel </span>ViewModel
    {
        <span style="color: blue">get
        </span>{
            <span style="color: #2b91af">CatalogViewModel </span>viewModel = <span style="color: blue">new </span><span style="color: #2b91af">CatalogViewModel</span>(
                <span style="color: blue">new </span><span style="color: #2b91af">MockCatalogService</span>());
            viewModel.Load();
            <span style="color: blue">return </span>viewModel;
        }
    }
}</pre><h3>Drag and drop to create list boxes</h3>
<p>If you create sample data from a class, you will be able to drag and drop collections onto the art board. This will automatically generate a ListBox and give it an ItemTemplate. Then you can customize this ItemTemplate using Edit Additional Templates: Edit Generated Items: Edit Current.</p>
<p><a href="http://qedcode.com/sites/default/files/LineofbusinessapplicationsinXAML_986E/image_4.png"><img style="border-right-width: 0px; display: inline; border-top-width: 0px; border-bottom-width: 0px; border-left-width: 0px" title="image" border="0" alt="image" src="http://qedcode.com/sites/default/files/LineofbusinessapplicationsinXAML_986E/image_thumb_4.png" width="646" height="119" /></a> </p>
<p>By default, all properties are added to a StackPanel. If you want a horizontal layout:</p>
<ul>
<li>Set the StackPanel’s Orientation property to Horizontal. </li>
<li>Right-click the StackPanel in the Objects and Timeline view and select Change Layout Type: Grid. </li>
<li>Click the grid ruler to create columns. </li>
<li>Right-click each property and select Auto Size: Fill. </li>
<li>Set all but the last column to Pixel sized. Set the last column to Auto sized. </li>
</ul>
<p>If you want a vertical layout, adjust the Margin of the lower properties to indent them and add spacing between items. Also, adjust the colors and fonts to enhance the contrast of the first property.</p>
<p>If you use the object data source method, Blend will not create a ListBox when you drag and drop. I recommend starting with the simple sample data, then creating an object data source later if you find you need to.</p>
<h3>Use ValueConverters for application-specific view logic</h3>
<p>You might need to represent data using different styles based on its value. For example, positive numbers appear black while negative numbers appear red. Create ValueConverters for these cases.</p>
<pre class="code"><span style="color: blue">public class </span><span style="color: #2b91af">RedWhenNegativeValueConverter </span>: <span style="color: #2b91af">IValueConverter
</span>{
    <span style="color: blue">public object </span>Convert(<span style="color: blue">object </span>value, <span style="color: #2b91af">Type </span>targetType, <span style="color: blue">object </span>parameter, System.Globalization.<span style="color: #2b91af">CultureInfo </span>culture)
    {
        <span style="color: blue">if </span>(targetType != <span style="color: blue">typeof</span>(<span style="color: #2b91af">Brush</span>))
            <span style="color: blue">throw new </span><span style="color: #2b91af">ApplicationException</span>(<span style="color: #a31515">&quot;You must bind to a brush.&quot;</span>);

        <span style="color: blue">decimal </span>decimalValue = (<span style="color: blue">decimal</span>)value;
        <span style="color: blue">if </span>(decimalValue &lt; 0.00m)
            <span style="color: blue">return new </span><span style="color: #2b91af">SolidColorBrush</span>(<span style="color: #2b91af">Colors</span>.Black);
        <span style="color: blue">else
            return new </span><span style="color: #2b91af">SolidColorBrush</span>(<span style="color: #2b91af">Colors</span>.Red);
    }

    <span style="color: blue">public object </span>ConvertBack(<span style="color: blue">object </span>value, <span style="color: #2b91af">Type </span>targetType, <span style="color: blue">object </span>parameter, System.Globalization.<span style="color: #2b91af">CultureInfo </span>culture)
    {
        <span style="color: blue">throw new </span><span style="color: #2b91af">NotImplementedException</span>();
    }
}</pre><p>Data bind the element’s color to the value. Apply value converters in Blend using the advanced properties pane in the binding dialog. Click the ellipsis to create a new instance of the value converter class.</p>
<p>These are the techniques that I find myself using most frequently when building line-of-business applications in WPF and Silverlight. I don’t know everything there is to know about XAML, but by focusing on the features that I find most useful, I’m able to build apps quickly.</p>
</div>
    <br />
        	<div class="links-align">
            <div class="bg-links">
                <div class="links-left">
                    <div class="links-right">
                        <div class="links"><ul class="links inline"><li class="comment_add first last"><a href="http://qedcode.com/comment/reply/39#comment-form" title="Add a new comment to this page.">Add new comment</a></li>
</ul></div>
                    </div>
                </div>
            </div>
        </div>
	    <br class="clear" />    
    </div><div class="node">
	    	
			            <div class="bg-h2">
                <h1 class="title"><a href="../content/entities-values-facts-and-projections.html">Entities, values, facts, and projections</a></h1>
                <div class="submit"><span class="submitted">Submitted by Michael L Perry on Mon, 11/22/2010 - 11:56</span></div>
            </div>
       
        <div class="taxonomy"></div>
  
    <div class="content"><p>No model is perfect, including the model of software behavior that we know as Object-Oriented. One of the most significant flaws in OO thinking is that <strong>everything is an object</strong>.</p>
<p>OO has certainly brought us forward in reasoning about machines. During that time, we’ve learned to model identity, interfaces, ownership, contracts, and many other useful concepts. We’ve also learned the drawbacks of shared state, remote objects, and persistence mapping, just to name a few challenges.</p>
<p>The original definitions of Object-Orientation do not necessarily insist that everything is an object. The founders simply defined the behavior of an object in software. Nevertheless, modern OO languages -- like Java, C#, and Ruby -- encourage us to make everything an object. If you ask an average developer if everything is an object, he will most likely say yes.</p>
<h3>Entities and values</h3>
<p>Domain Driven Design draws a line between entities and values. This distinction predates DDD, but the practitioners (most notably Eric Evans) are very explicit on this point. Entities have identity; values do not.</p>
<p>Identity is the property of an object that allows us to distinguish it from other objects. Even if two objects have exactly the same state, they are two different objects.</p>
<p>Identity implies <strong>consistency</strong>. Two observers looking at the same object will see the same behavior. If one of the observers acts upon the object and changes its behavior, the other one sees that change as well. Peers can use consistency to <strong>collaborate</strong> through a shared object.</p>
<p>Values, on the other hand, do not have identity. When you pass a value, the recipient does not receive the same object as you. They receive a copy.</p>
<p>Since values do not have identity, they do not have consistency. You cannot change a value to collaborate with a peer. Taken to the extreme, you cannot even rely upon self-consistency. If you change a value, you cannot be sure that you yourself will observe the change in behavior. Therefore, values are usually treated as immutable.</p>
<h3>Toward a complete system of behavior</h3>
<p>While we as an industry have found the distinction between entities and values to be necessary, we have not found it to be sufficient. Problems still arise in real systems when we have just these two classifications.</p>
<p>The identity of entities allows peers to collaborate via shared state. But when those two peers are on different threads, different processes, or different machines, shared state becomes a challenge. <strong>Consistency is promised, but cannot be guaranteed.</strong> Entities are not sufficient to solve distributed computing problems. Just look to DCOM if you need convincing.</p>
<p>Persistence is also a problem. The well-documented Object-Relational Impedance Mismatch plagues OO systems backed by Relational databases. Network, Object, and Document databases map better, since these systems treat objects themselves as persistent. Nevertheless, <strong>persistent entities</strong> pose a challenge. Two peers can read the same entity, but yet still end up with two copies. Unless the database management system is careful about maintaining consistency, the version of the entity in memory is stale once it is read from the database.</p>
<p>Mapping and change propagation are desirable features of software, but not directly satisfied by either entities or values. Consider declarative UI frameworks, such as HTML and XAML. These are <strong>mappings</strong> of object behavior into visible structure. Entities, having identity, will change. When those changes occur, the visible structure should update. Features such as HTML templating and XAML data binding have been created to propagate changes to the UI, but these are not part of a complete OO model. Additional imperative constructs -- message busses or AJAX calls -- are required to make these solutions work. Functional programming languages have typically been much better at mapping than OO languages have.</p>
<p>The entity-value distinction is insufficient because it considers only one dimension of behavior: identity. If we add the dimensions of persistence and consistency, we can define a system that is both necessary and sufficient for describing software behavior.</p>
<h3>Facts</h3>
<p>To solve the problem of shared state, let us add the classification of “fact”. Two peers changing a shared entity are relying upon consistency to collaborate. But consistency cannot be guaranteed in a distributed system. We therefore define a fact to be immutable.</p>
<p>Since a fact is immutable, two peers observing the same fact will observe the same state. But this alone is not enough to facilitate collaboration. Each peer must be able to make changes by expressing related facts. We cannot guarantee that other peers will see these new facts immediately. But we can guarantee that they will see these new facts <strong>eventually</strong>. “Eventually” might be a very long time if peers remain disconnected, but facts will flow once the connection is reestablished.</p>
<p>Now that we have facts to solve the shared state problem, we can take that responsibility away from entities. So we mandate that an entity is no longer consistent in a large scale. It is only consistent within a narrow scope. Ideally, that scope is a single thread, but it is certainly a single process on a single machine.</p>
<p>Since the scope of an entity has been constrained, we must also mandate that it is not persistent. The narrow scope must end not only at a thread or process boundary, but also at a temporal boundary. A new process started at a later point in time cannot load that same entity from a database. It can only load facts.</p>
<h3>Projections</h3>
<p>To solve the problems of mapping and change propagation, let us add the classification of “projection”. A projection is an object that has no state of its own. It merely delegates all of its behavior to other objects. Changes to those objects are immediately visible in the projection.</p>
<p>Views such as HTML pages or XAML controls are projections. They simply <strong>transform</strong> the behavior of other objects into a structure that the user can observe. Any actions of the user are applied to the underlying objects. Similarly, changes to the underlying objects are immediately propagated to the structure that the user sees.</p>
<p>The MVVM pattern has emerged in the XAML space as a way of projecting Model behavior onto the View. XAML views can only data bind through properties. Models don’t always expose the properties that the view requires. It is therefore necessary to project all visible behavior through properties of an intermediate object: the <strong>View Model</strong>. So a View Model, like the View that it serves, is a projection.</p>
<p>in summary, the classifications of object are:</p>
<ul>
<table border="0" cellspacing="0" cellpadding="2" width="526">
<tbody>
<tr>
<td valign="top" width="78">Entity</td>
<td valign="top" width="113">Has identity</td>
<td valign="top" width="83">Transient</td>
<td valign="top" width="87">Mutable</td>
<td valign="top" width="163">Constrained consistency</td>
</tr>
<tr>
<td valign="top" width="78">Value</td>
<td valign="top" width="113">Has no identity</td>
<td valign="top" width="83">Transient</td>
<td valign="top" width="87">Immutable</td>
<td valign="top" width="163">No consistency</td>
</tr>
<tr>
<td valign="top" width="78">Fact</td>
<td valign="top" width="113">Has identity</td>
<td valign="top" width="83">Persistent</td>
<td valign="top" width="87">Immutable</td>
<td valign="top" width="163">Eventually consistency</td>
</tr>
<tr>
<td valign="top" width="78">Projection</td>
<td valign="top" width="113">Has identity</td>
<td valign="top" width="83">Transient</td>
<td valign="top" width="87">Immutable</td>
<td valign="top" width="163">Constrained consistency</td>
</tr>
</tbody>
</table>
</ul>
<p>This classification taxonomy is necessary and sufficient to model the behavior of distributed collaborative software systems. There are certainly systems that fall outside of this set. This taxonomy may not be necessary and sufficient for those systems.</p>
</div>
    <br />
        	<div class="links-align">
            <div class="bg-links">
                <div class="links-left">
                    <div class="links-right">
                        <div class="links"><ul class="links inline"><li class="comment_comments first last"><a href="../content/entities-values-facts-and-projections.html#comments" title="Jump to the first comment of this posting.">2 comments</a></li>
</ul></div>
                    </div>
                </div>
            </div>
        </div>
	    <br class="clear" />    
    </div><div class="node">
	    	
			            <div class="bg-h2">
                <h1 class="title"><a href="../practice/provable-apis.html">Provable APIs</a></h1>
                <div class="submit"><span class="submitted">Submitted by Michael L Perry on Fri, 10/15/2010 - 11:31</span></div>
            </div>
       
        <div class="taxonomy"></div>
  
    <div class="content"><p><a href="http://qedcode.com/sites/default/files/ProvableAPIs_914F/image.png"><img style="border-right-width: 0px; display: inline; border-top-width: 0px; border-bottom-width: 0px; margin-left: 0px; border-left-width: 0px; margin-right: 0px" title="image" border="0" alt="image" align="right" src="http://qedcode.com/sites/default/files/ProvableAPIs_914F/image_thumb.png" width="244" height="244" /></a>Tool vendors like Microsoft are not the only ones who publish APIs. When we create layered software, each layer has an API that is consumed by the next one up. To ensure the quality of our software, we should try to create provable APIs. These are interfaces that guide the caller to the correct usage patterns. They help the compiler help us to verify the correctness of our code.</p>
<p>An unhelpful API throws exceptions whenever we get something wrong. These kinds of APIs can cause stress and lead to bugs that are difficult to correct. There is a right way to call them, but there is also a wrong way. The wrong way still compiles, but it contains bugs nonetheless.</p>
<p>Some language features and patterns that can help us to prove the correctness of code:</p>
<ul>
<li>Parameters </li>
<li>Callbacks </li>
<li>Foreign keys </li>
<li>Factories </li>
<li>Constructors </li>
</ul>
<h3>You must set a property before calling this method</h3>
<p>A ShoppingService uses a Transaction to perform some basic operations. For example:</p>
<pre class="code"><span style="color: blue">public class </span><span style="color: #2b91af">Transaction
</span>{
}

<span style="color: blue">public class </span><span style="color: #2b91af">ShoppingService
</span>{
    <span style="color: blue">public </span><span style="color: #2b91af">Transaction </span>Transaction { <span style="color: blue">get</span>; <span style="color: blue">set</span>; }

    <span style="color: blue">public void </span>AddToCart(<span style="color: blue">int </span>cartId, <span style="color: blue">int </span>itemId, <span style="color: blue">int </span>quantity)
    {
    }
}

<span style="color: blue">public static void </span>Right()
{
    <span style="color: #2b91af">ShoppingService </span>shoppingService = <span style="color: blue">new </span><span style="color: #2b91af">ShoppingService</span>();
    shoppingService.Transaction = <span style="color: blue">new </span><span style="color: #2b91af">Transaction</span>();
    shoppingService.AddToCart(1, 2, 3);
}

<span style="color: blue">public static void </span>Wrong()
{
    <span style="color: #2b91af">ShoppingService </span>shoppingService = <span style="color: blue">new </span><span style="color: #2b91af">ShoppingService</span>();
    shoppingService.AddToCart(1, 2, 3);
}</pre><p>It has a Transaction property that must be set before it is called. If you forget to set it, the method throws an exception. This API is unhelpful. If instead the method takes the transaction as a <strong>parameter</strong>, the compiler enforces this rule.</p>
<pre class="code"><span style="color: blue">public class </span><span style="color: #2b91af">ShoppingService
</span>{
    <span style="color: blue">public void </span>AddToCart(<span style="color: #2b91af">Transaction </span>transaction, <span style="color: blue">int </span>cartId, <span style="color: blue">int </span>itemId, <span style="color: blue">int </span>quantity)
    {
    }
}

<span style="color: blue">public static void </span>Right()
{
    <span style="color: #2b91af">ShoppingService </span>shoppingService = <span style="color: blue">new </span><span style="color: #2b91af">ShoppingService</span>();
    shoppingService.AddToCart(<span style="color: blue">new </span><span style="color: #2b91af">Transaction</span>(), 1, 2, 3);
}</pre><p>In this version of the code, we’ve refactored the Transaction property and turned it into a method parameter. The right way of calling the method compiles. The wrong way does not.</p>
<h3>You must check a condition before calling this method</h3>
<p>Now let’s look at the interface for a cache. You can Add an item, Get an item, or check to see if the cache already Contains an item. There is a right way to use this API, and a couple of wrong ways.</p>
<pre class="code"><span style="color: blue">public class </span><span style="color: #2b91af">Cache</span>&lt;TKey, TItem&gt;
{
    <span style="color: blue">public bool </span>Contains(TKey key)
    {
        <span style="color: blue">return false</span>;
    }

    <span style="color: blue">public void </span>Add(TKey key, TItem item)
    {
        <span style="color: blue">if </span>(Contains(key))
            <span style="color: blue">throw new </span><span style="color: #2b91af">ApplicationException</span>();
    }

    <span style="color: blue">public </span>TItem Get(TKey key)
    {
        <span style="color: blue">if </span>(!Contains(key))
            <span style="color: blue">throw new </span><span style="color: #2b91af">ApplicationException</span>();

        <span style="color: blue">return default</span>(TItem);
    }
}

<span style="color: blue">public static void </span>Right()
{
    <span style="color: #2b91af">Cache</span>&lt;<span style="color: blue">int</span>, <span style="color: blue">string</span>&gt; cache = <span style="color: blue">new </span><span style="color: #2b91af">Cache</span>&lt;<span style="color: blue">int</span>, <span style="color: blue">string</span>&gt;();
    <span style="color: blue">int </span>key = 42;
    <span style="color: blue">string </span>value;

    <span style="color: blue">if </span>(cache.Contains(key))
    {
        value = cache.Get(key);
    }
    <span style="color: blue">else
    </span>{
        value = LoadValue(key);
        cache.Add(key, value);
    }
}

<span style="color: blue">public static void </span>Wrong1()
{
    <span style="color: #2b91af">Cache</span>&lt;<span style="color: blue">int</span>, <span style="color: blue">string</span>&gt; cache = <span style="color: blue">new </span><span style="color: #2b91af">Cache</span>&lt;<span style="color: blue">int</span>, <span style="color: blue">string</span>&gt;();
    <span style="color: blue">int </span>key = 42;
    <span style="color: blue">string </span>value;

    value = cache.Get(key);
    <span style="color: blue">if </span>(value == <span style="color: blue">null</span>)
    {
        value = LoadValue(key);
        cache.Add(key, value);
    }
}

<span style="color: blue">public static void </span>Wrong2()
{
    <span style="color: #2b91af">Cache</span>&lt;<span style="color: blue">int</span>, <span style="color: blue">string</span>&gt; cache = <span style="color: blue">new </span><span style="color: #2b91af">Cache</span>&lt;<span style="color: blue">int</span>, <span style="color: blue">string</span>&gt;();
    <span style="color: blue">int </span>key = 42;
    <span style="color: blue">string </span>value;

    value = LoadValue(key);
    cache.Add(key, value);
}

<span style="color: blue">private static string </span>LoadValue(<span style="color: blue">int </span>key)
{
    <span style="color: blue">return </span><span style="color: #a31515">&quot;the value&quot;</span>;
}</pre><p>The right way is to check the condition first. If the item is not there, load it and add it. If the item is already there, get it.</p>
<p>But you might be confused. Maybe you need to get it first, and if Get returns null you know it’s not there. That is not the contract of this class, but it is impossible to see that from the public API alone. It will throw an exception.</p>
<p>You might also make the mistake of trying to add an item to the cache without first checking to see if it is there. This could be a copy/paste bug, or perhaps your code took a path that you didn’t anticipate. This is going to throw an exception, too.</p>
<p>Let’s refactor this code by pulling the right usage pattern into the Cache itself. Since we need to do some work right in the middle, we’ll provide a <strong>callback</strong>.</p>
<pre class="code"><span style="color: blue">public class </span><span style="color: #2b91af">Cache</span>&lt;TKey, TItem&gt;
{
    <span style="color: blue">public bool </span>Contains(TKey key)
    {
        <span style="color: blue">return false</span>;
    }

    <span style="color: blue">public </span>TItem GetValue(TKey key, Func&lt;TKey, TItem&gt; fetchValue)
    {
        TItem value;
        <span style="color: blue">if </span>(Contains(key))
        {
            value = Get(key);
        }
        <span style="color: blue">else
        </span>{
            value = fetchValue(key);
            Add(key, value);
        }
        <span style="color: blue">return </span>value;
    }

    <span style="color: blue">private void </span>Add(TKey key, TItem item)
    {
        <span style="color: blue">if </span>(Contains(key))
            <span style="color: blue">throw new </span><span style="color: #2b91af">ApplicationException</span>();
    }

    <span style="color: blue">private </span>TItem Get(TKey key)
    {
        <span style="color: blue">if </span>(!Contains(key))
            <span style="color: blue">throw new </span><span style="color: #2b91af">ApplicationException</span>();

        <span style="color: blue">return default</span>(TItem);
    }
}

<span style="color: blue">public static void </span>Right()
{
    <span style="color: #2b91af">Cache</span>&lt;<span style="color: blue">int</span>, <span style="color: blue">string</span>&gt; cache = <span style="color: blue">new </span><span style="color: #2b91af">Cache</span>&lt;<span style="color: blue">int</span>, <span style="color: blue">string</span>&gt;();
    <span style="color: blue">int </span>key = 42;
    <span style="color: blue">string </span>value;

    value = cache.GetValue(key, k =&gt; LoadValue(k));
}</pre><p>After moving this code into the Cache class, we can make the Add and Get methods private. This makes it impossible to use the Cache incorrectly.</p>
<h3>You must call this method after setting properties</h3>
<p>It’s a good idea to have business objects that perform validation. It lets you respond to the user, and it prevents bad data from getting into the database. But what if you forget to call the Validate method?</p>
<pre class="code"><span style="color: blue">public class </span><span style="color: #2b91af">Customer
</span>{
    <span style="color: blue">private static </span><span style="color: #2b91af">Regex </span>ValidPhoneNumber = <span style="color: blue">new </span><span style="color: #2b91af">Regex</span>(<span style="color: #a31515">@&quot;\([0-9]{3}\) [0-9]{3}-[0-9]{4}&quot;</span>);

    <span style="color: blue">public string </span>Name { <span style="color: blue">get</span>; <span style="color: blue">set</span>; }
    <span style="color: blue">public string </span>PhoneNumber { <span style="color: blue">get</span>; <span style="color: blue">set</span>; }

    <span style="color: blue">public bool </span>Validate()
    {
        <span style="color: blue">if </span>(!ValidPhoneNumber.IsMatch(PhoneNumber))
            <span style="color: blue">return false</span>;

        <span style="color: blue">return true</span>;
    }
}

<span style="color: blue">public static void </span>Right()
{
    <span style="color: #2b91af">Customer </span>customer = <span style="color: blue">new </span><span style="color: #2b91af">Customer</span>()
    {
        Name = <span style="color: #a31515">&quot;Michael L Perry&quot;</span>,
        PhoneNumber = <span style="color: #a31515">&quot;(214) 555-7909&quot;
    </span>};

    <span style="color: blue">if </span>(!customer.Validate())
        <span style="color: blue">throw new </span><span style="color: #2b91af">ApplicationException</span>();
}

<span style="color: blue">public static void </span>Wrong()
{
    <span style="color: #2b91af">Customer </span>customer = <span style="color: blue">new </span><span style="color: #2b91af">Customer</span>()
    {
        Name = <span style="color: #a31515">&quot;Michael L Perry&quot;</span>,
        PhoneNumber = <span style="color: #a31515">&quot;555-7909&quot;
    </span>};
}</pre><p>Nothing about this API forces you to call Validate. And if you don’t, bad data can get through.</p>
<p>The problem is that the PhoneNumber is a string – a very permissive type. We can make it a more restrictive type and use a <strong>factory</strong> method to enforce validation.</p>
<pre class="code"><span style="color: blue">public class </span><span style="color: #2b91af">PhoneNumber
</span>{
    <span style="color: blue">private static </span><span style="color: #2b91af">Regex </span>ValidPhoneNumber = <span style="color: blue">new </span><span style="color: #2b91af">Regex</span>(<span style="color: #a31515">@&quot;\([0-9]{3}\) [0-9]{3}-[0-9]{4}&quot;</span>);

    <span style="color: blue">private string </span>_value;

    <span style="color: blue">private </span>PhoneNumber(<span style="color: blue">string </span>value)
    {
        _value = value;
    }

    <span style="color: blue">public string </span>Value
    {
        <span style="color: blue">get </span>{ <span style="color: blue">return </span>_value; }
    }

    <span style="color: blue">public static </span><span style="color: #2b91af">PhoneNumber </span>Parse(<span style="color: blue">string </span>value)
    {
        <span style="color: blue">if </span>(!ValidPhoneNumber.IsMatch(value))
            <span style="color: blue">throw new </span><span style="color: #2b91af">ApplicationException</span>();

        <span style="color: blue">return new </span><span style="color: #2b91af">PhoneNumber</span>(value);
    }
}

<span style="color: blue">public class </span><span style="color: #2b91af">Customer
</span>{
    <span style="color: blue">public string </span>Name { <span style="color: blue">get</span>; <span style="color: blue">set</span>; }
    <span style="color: blue">public </span><span style="color: #2b91af">PhoneNumber </span>PhoneNumber { <span style="color: blue">get</span>; <span style="color: blue">set</span>; }
}

<span style="color: blue">public static void </span>Right()
{
    <span style="color: #2b91af">Customer </span>customer = <span style="color: blue">new </span><span style="color: #2b91af">Customer</span>()
    {
        Name = <span style="color: #a31515">&quot;Michael L Perry&quot;</span>,
        PhoneNumber = <span style="color: #2b91af">PhoneNumber</span>.Parse(<span style="color: #a31515">&quot;(214) 555-7909&quot;</span>)
    };
}</pre><p>Now we are forced to validate the string in order to get a PhoneNumber object. We can still provide feedback on user input, since that’s the time at which we will be parsing the string. But now we can’t forget.</p>
<h3>You cannot change this property after calling a method</h3>
<p>The .NET Connection class requires that you provide a connection string before you access any data. And it also prevents you from changing the connection string after you connect. These rules are fine. The problem is that they are enforced by a state machine behind an unhelpful API that throws exceptions if you get it wrong.</p>
<pre class="code"><span style="color: blue">public class </span><span style="color: #2b91af">Connection
</span>{
    <span style="color: blue">private string </span>_connectionString;
    <span style="color: blue">private bool </span>_connected = <span style="color: blue">false</span>;

    <span style="color: blue">public string </span>ConnectionString
    {
        <span style="color: blue">get
        </span>{
            <span style="color: blue">return </span>_connectionString;
        }
        <span style="color: blue">set
        </span>{
            <span style="color: blue">if </span>(_connected)
                <span style="color: blue">throw new </span><span style="color: #2b91af">ApplicationException</span>();

            _connectionString = <span style="color: blue">value</span>;
        }
    }

    <span style="color: blue">public void </span>Connect()
    {
        <span style="color: blue">if </span>(<span style="color: #2b91af">String</span>.IsNullOrEmpty(_connectionString))
            <span style="color: blue">throw new </span><span style="color: #2b91af">ApplicationException</span>();

        _connected = <span style="color: blue">true</span>;
    }

    <span style="color: blue">public void </span>Disconnect()
    {
        _connected = <span style="color: blue">false</span>;
    }
}

<span style="color: blue">public static void </span>Right()
{
    <span style="color: #2b91af">Connection </span>connection = <span style="color: blue">new </span><span style="color: #2b91af">Connection</span>();
    connection.ConnectionString = <span style="color: #a31515">&quot;DataSource=//MyMachine&quot;</span>;
    connection.Connect();
    connection.Disconnect();
}

<span style="color: blue">public static void </span>Wrong1()
{
    <span style="color: #2b91af">Connection </span>connection = <span style="color: blue">new </span><span style="color: #2b91af">Connection</span>();
    connection.Connect();
    connection.Disconnect();
}

<span style="color: blue">public static void </span>Wrong2()
{
    <span style="color: #2b91af">Connection </span>connection = <span style="color: blue">new </span><span style="color: #2b91af">Connection</span>();
    connection.ConnectionString = <span style="color: #a31515">&quot;DataSource=//MyMachine&quot;</span>;
    connection.Connect();
    connection.ConnectionString = <span style="color: #a31515">&quot;DataSource=//HisMachine&quot;</span>;
    connection.Disconnect();
}</pre><p>If we were to make the connection string a <strong>constructor</strong> parameter instead of a property, we wouldn’t be able to change it.</p>
<pre class="code"><span style="color: blue">public class </span><span style="color: #2b91af">Connection
</span>{
    <span style="color: blue">private string </span>_connectionString;

    <span style="color: blue">public </span>Connection(<span style="color: blue">string </span>connectionString)
    {
        _connectionString = connectionString;
    }

    <span style="color: blue">public string </span>ConnectionString
    {
        <span style="color: blue">get </span>{ <span style="color: blue">return </span>_connectionString; }
    }

    <span style="color: blue">public void </span>Connect()
    {
    }

    <span style="color: blue">public void </span>Disconnect()
    {
    }
}

<span style="color: blue">public static void </span>Right()
{
    <span style="color: #2b91af">Connection </span>connection = <span style="color: blue">new </span><span style="color: #2b91af">Connection</span>(<span style="color: #a31515">&quot;DataSource=//MyMachine&quot;</span>);
    connection.Connect();
    connection.Disconnect();
}</pre><p>The .NET Connection class has a constructor that takes a connection string. But it also has a constructor that does not. The overloaded constructor and modifiable property make it possible to do the wrong thing. Rip them out and let the compiler enforce correctness for you.</p>
<h3>You must dispose this object</h3>
<p>Let’s go back to the ShoppingService. There’s still a problem with the code. It’s possible to leak database transactions if you forget to dispose them.</p>
<pre class="code"><span style="color: blue">public class </span><span style="color: #2b91af">Transaction </span>: <span style="color: #2b91af">IDisposable
</span>{
    <span style="color: blue">public void </span>Dispose()
    {
    }
}

<span style="color: blue">public class </span><span style="color: #2b91af">ShoppingService
</span>{
    <span style="color: blue">public void </span>AddToCart(<span style="color: #2b91af">Transaction </span>transaction, <span style="color: blue">int </span>cartId, <span style="color: blue">int </span>itemId, <span style="color: blue">int </span>quantity)
    {
    }
}

<span style="color: blue">public static void </span>Right()
{
    <span style="color: #2b91af">ShoppingService </span>shoppingService = <span style="color: blue">new </span><span style="color: #2b91af">ShoppingService</span>();
    <span style="color: blue">using </span>(<span style="color: #2b91af">Transaction </span>transaction = <span style="color: blue">new </span><span style="color: #2b91af">Transaction</span>())
    {
        shoppingService.AddToCart(transaction, 1, 2, 3);
    }
}

<span style="color: blue">public static void </span>Wrong()
{
    <span style="color: #2b91af">ShoppingService </span>shoppingService = <span style="color: blue">new </span><span style="color: #2b91af">ShoppingService</span>();
    shoppingService.AddToCart(<span style="color: blue">new </span><span style="color: #2b91af">Transaction</span>(), 1, 2, 3);
}</pre><p>The compiler doesn’t require you to dispose an object that implements IDisposable. It doesn’t even issue a warning. Some refactoring tools and static analysis tools look for these problems, but we can refactor the API to enforce it at the compiler level. We’ll use a combination of a <strong>factory</strong> and a <strong>callback</strong> to take that responsibility away from the caller.</p>
<pre class="code"><span style="color: blue">public class </span><span style="color: #2b91af">TransactionFactory
</span>{
    <span style="color: blue">private </span>Func&lt;<span style="color: #2b91af">Transaction</span>&gt; _factoryMethod;

    <span style="color: blue">public </span>TransactionFactory(Func&lt;<span style="color: #2b91af">Transaction</span>&gt; factoryMethod)
    {
        _factoryMethod = factoryMethod;
    }

    <span style="color: blue">public void </span>Do(Action&lt;<span style="color: #2b91af">Transaction</span>&gt; action)
    {
        <span style="color: blue">using </span>(<span style="color: blue">var </span>transaction = _factoryMethod())
        {
            action(transaction);
        }
    }
}

<span style="color: blue">public static void </span>Right(<span style="color: #2b91af">TransactionFactory </span>transactionFactory)
{
    <span style="color: #2b91af">ShoppingService </span>shoppingService = <span style="color: blue">new </span><span style="color: #2b91af">ShoppingService</span>();
    transactionFactory.Do(transaction =&gt;
    {
        shoppingService.AddToCart(transaction, 1, 2, 3);
    });
}</pre><p>The caller receives a TransactionFactory, rather than creating a Transaction himself. But the factory doesn’t just ensure that the Transaction is created properly, it also ensures that it is disposed of properly.</p>
<h3>This step must occur before that step</h3>
<p>Finally, we can even use patterns to prove things about the business process as a whole. For example, A patient must be diagnosed with a disease before the doctor selects a treatment plan.</p>
<p><a href="http://qedcode.com/sites/default/files/ProvableAPIs_914F/image_3.png"><img style="border-right-width: 0px; display: inline; border-top-width: 0px; border-bottom-width: 0px; border-left-width: 0px" title="image" border="0" alt="image" src="http://qedcode.com/sites/default/files/ProvableAPIs_914F/image_thumb_3.png" width="728" height="522" /></a></p>
<p>It’s possible to insert a Diagnosis before a TreatmentPlanSelection, but nothing about the data model requires it. Let’s use a <strong>foreign key</strong> to prove that the steps happen in the right order.</p>
<p><a href="http://qedcode.com/sites/default/files/ProvableAPIs_914F/image_4.png"><img style="border-right-width: 0px; display: inline; border-top-width: 0px; border-bottom-width: 0px; border-left-width: 0px" title="image" border="0" alt="image" src="http://qedcode.com/sites/default/files/ProvableAPIs_914F/image_thumb_4.png" width="730" height="527" /></a></p>
<p>By moving the foreign key from Patient to Diagnosis, we’ve made it impossible to select a treatment plan before diagnosing the patient. We haven’t lost the ability to query for the patient. It just requires one additional join.</p>
<p>Furthermore, we can now easily add logic to verify that the selected treatment plan is approved for the same condition with which the patient was diagnosed. Sadly, we cannot enforce this rule in the data model.</p>
<p>It doesn’t require any special tools to prove that an API is properly used. All it takes is a little forethought to turn an unhelpful API that buzzes and throws exceptions into a helpful, provable API.</p>
</div>
    <br />
        	<div class="links-align">
            <div class="bg-links">
                <div class="links-left">
                    <div class="links-right">
                        <div class="links"><ul class="links inline"><li class="comment_comments first last"><a href="../practice/provable-apis.html#comments" title="Jump to the first comment of this posting.">2 comments</a></li>
</ul></div>
                    </div>
                </div>
            </div>
        </div>
	    <br class="clear" />    
    </div><div class="item-list"><ul class="pager"><li class="pager-first first"><a href="michael-l-perry.html" title="Go to first page" class="active">« first</a></li>
<li class="pager-previous"><a href="michael-l-perryfdb0.html?page=4" title="Go to previous page" class="active">‹ previous</a></li>
<li class="pager-item"><a href="michael-l-perry.html" title="Go to page 1" class="active">1</a></li>
<li class="pager-item"><a href="michael-l-perry2679.html?page=1" title="Go to page 2" class="active">2</a></li>
<li class="pager-item"><a href="michael-l-perry4658.html?page=2" title="Go to page 3" class="active">3</a></li>
<li class="pager-item"><a href="michael-l-perry9ba9.html?page=3" title="Go to page 4" class="active">4</a></li>
<li class="pager-item"><a href="michael-l-perryfdb0.html?page=4" title="Go to page 5" class="active">5</a></li>
<li class="pager-current">6</li>
<li class="pager-item"><a href="michael-l-perryc575.html?page=6" title="Go to page 7" class="active">7</a></li>
<li class="pager-item"><a href="michael-l-perry235c.html?page=7" title="Go to page 8" class="active">8</a></li>
<li class="pager-item"><a href="michael-l-perryfdfa.html?page=8" title="Go to page 9" class="active">9</a></li>
<li class="pager-next"><a href="michael-l-perryc575.html?page=6" title="Go to next page" class="active">next ›</a></li>
<li class="pager-last last"><a href="michael-l-perryfdfa.html?page=8" title="Go to last page" class="active">last »</a></li>
</ul></div>                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </td>
                    </tr>
                </table>
            </td>
        </tr>
    </table>
    <div id="footer">
    	<div class="foot">
        	                <span><a rel="license" href="http://creativecommons.org/licenses/by/3.0/us/"><img alt="Creative Commons License" src="../../licensebuttons.net/l/by/3.0/us/88x31.png" /></a><br /><span dc="http://purl.org/dc/elements/1.1/" href="http://purl.org/dc/dcmitype/Text" property="title" rel="type">Q.E.D. Code</span> by <a cc="http://creativecommons.org/ns#" href="../index.html" property="attributionName" rel="attributionURL">Michael L Perry</a> is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by/3.0/us/">Creative Commons Attribution 3.0 United States License</a>.</span>
                    </div>
    </div>
<script type="text/javascript">
<!--//--><![CDATA[//><!--
var _gaq = _gaq || [];_gaq.push(["_setAccount", "UA-389401-7"]);_gaq.push(["_trackPageview"]);(function() {var ga = document.createElement("script");ga.type = "text/javascript";ga.async = true;ga.src = ("https:" == document.location.protocol ? "https://ssl" : "http://www") + ".google-analytics.com/ga.js";var s = document.getElementsByTagName("script")[0];s.parentNode.insertBefore(ga, s);})();
//--><!]]>
</script>
</body>

<!-- Mirrored from qedcode.com/blogs/michael-l-perry?page=5 by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 13 Jan 2017 12:22:18 GMT -->
</html>
